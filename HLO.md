# checktok

- Башманов Иван, P3222

**Checktok** - сервис, позволяющий получить статистику по любому аккаунту в TikTok и узнать его примерную доходность за одно видео. Помимо этого, существует возможность за небольшую плату получить в текстовом виде гайд как раскрутить аккаунт и увеличить его потенциальную доходность. Гайд генерируется, базируясь на собранной по аккаунту статистике.

## Функции

- Быстрое бесплатное получение статистики* любого аккаунта по его username (бесплатно, без регистрации)
- Получение гайда по продвижению аккаунта на основе собранной по нему статистики. Далее - отчет (платно, требуется регистрация)
- Регистрация пользователя для заказа и просмотра отчетов
- Топ Россикйсих тикток-блоггеров по заработку
 
 **в статистику входят: общее кол-во подписчиков, лайков, комментариев, репосотов, просмотров, лайкнутых видео самим пользователем, engagement percentage, потценциальной доход от одного видео и рейтинг checktok от 0 до 100*
 
 ## Архитектура
 
 Веб-приложение на микрофреймворке Flask и ЯП Python. Базы данных - SQL. Для работы с БД используется расширение Flask-SQLalchemy. Для получения данных из TikTok используется TikTokApi - third-party API wrapper для python. [Подробнее здесь.](https://dteather.com/TikTok-Api/) Templates страниц сайта написаны на PHP + JS с использованием разметки Jinja2 для вставки синтакса Python.
 
 ## Высокоуровневое описание деталей
 
 ### Базы данных
 - users - хранение логинов, паролей, доступных для просмотра отчетов и прочих данных пользователей.
 - stats - хранение данных статистики тикток-аккаунтов по их userid и timestamp их получения.
 - reports - хранение key values, основанных на данных из БД stats, которые необходимы для генерации отчета. Так же хранение ID отчета.
 - top - хранение данных для вывода на странице топа Российских тикток-блогеров.

**Отчет** - автоматически генерируемая по ключевым значениям из базы данных страница. 

**Доступ к отчетам** - у каждого юзера и отчета есть свой ID. Определенный юзер может посмотреть только те отчеты, доступ к которым записан для него в базе данных users. Например, если юзеру с ID 123 доступен отчет с ID 456, то валидной ссылкой для просмотра отчета будет: checktok.ru/show_report.php?user=123&report=456. По этой ссылке так же смогут просмотреть отчет другие люди.

**Получение статистики из БД** - при запросе статистики система сначала проверяет, существует ли такой пользователь в БД top, и если да, то выводит данные из данной БД. В ином случае проверяется, существуют ли данные для пользователя с таким username в БД, и если да, то как давно они были получены. Если данные присутствуют и не старше 1 суток, то выводятся данные из БД, в ином случае делается еще один запрос к TikTokApi и данные в БД по этому username добавляются/обновляются. Данные о топовых блогерах (БД top) автоматически обновляются раз в сутки.

**Регистрация** - пользователь либо может зарегистрироваться самостоятельно, либо его попросят ввести данные при покупке отчета и аккаунт будет автоматически создан. За логин берется email пользователя.

**Покупка отчетов** - пользователь может купить отчет для любого аккаунта - никакой приватной информации при этом не передается, т.к. вся статистика присутствует в открытом доступе. Оплата производится через онлайн платежную систему.
